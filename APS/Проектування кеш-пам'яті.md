# Основна ідея:
- Ідеальна кеш-пам’ять зберігає часто використовувані дані, щоб прискорити доступ до них.
- Питання: чи можна передбачити, які дані знадобляться в майбутньому?

---
### Локальність доступу
1. **Темпоральна локальність (Temporal locality)**
    - Дані, які щойно використовувалися, мають високу ймовірність бути використаними знову найближчим часом.
    - Стратегія: копіювати потрібні дані з головної пам’яті (HP) у кеш.
2. **Просторова локальність (Spatial locality)**
    - Дані, розташовані поруч із недавно використаними, ймовірно, також будуть потрібні.
    - Стратегія: копіювати не тільки потрібні дані, а й сусідні блоки пам’яті.
**Питання:**
- Які дані перемістити у кеш?
    - Часто використовувані
    - Сусідні дані для забезпечення просторої локальностi

---
### **Структура кеш-пам’яті**
- Кеш поділяється на **рамки блоків (cache frames, S)**.
- Кожен блок **B** з головної пам’яті (HP) відображається на один рам блоків **S** у кеші.

---
# **Типи кеш-пам’яті за ступенем асоціативності**
## 1. **Кеш з прямою прив'язкою (Direct-mapped cache)**
На кожен рам блоку припадає **1 блок** з HP (S = B).
![[Pasted image 20260113025315.png]]
![[Pasted image 20260113025328.png]]
```
		addi $t0, $0, 5
loop:   beq $t0, $0, done
		lw $t1, 0x4($0)
		lw $t2, 0xC($0)
		lw $t3, 0x8($0)
		addi $t0, $t0, -1
		j loop
done:

```
![[Pasted image 20260113025655.png]]
### Кеш зі збільшеними блоками
![[Pasted image 20260113030225.png]]
```
		addi $t0, $0, 5
loop:   beq $t0, $0, done
		lw $t1, 0x4($0)
		lw $t2, 0xC($0)
		lw $t3, 0x8($0)
		addi $t0, $t0, -1
		j loop
done:
```
MR = 1/15 = 6.67% 
- Більші блоки зменшують конфлікти завдяки просторовій локальності

---
## 2. N-шляхова асоціативна пам'ять (N-way associative cache)**
На кожен рам блоку припадає **N блоків** з HP.
![[Pasted image 20260113025740.png]]
```
		addi $t0, $0, 5
loop:   beq $t0, $0, done
		lw $t1, 0x4($0)
		lw $t2, 0x24($0)
		addi $t0, $t0, -1
		j loop
done:
```
MR = 2/10 = 20% 
- Асоціативність зменшить кількість конфліктів

---
## 3. **Повністю асоціативна cache (Fully associative cache)**
**Будь-який блок** може бути розміщений у будь-якому рамку кешу.
- Зменшує конфлікти, але є дорогим рішенням
	    ![[Pasted image 20260113025941.png]]
# Приклад
Задано такі параметри кешу:
- Місткість C = 8 слів
- Розмір блоку b = 1 слово
- Кількість блоків B = 8