# Транспортна мережа
**Транспортна мережа** (скорочено *мережа*) — це реберно-ваговий зв’язний орієнтований граф  
$\vec{G} = (V, \vec{H}),$
де $|V| = n$, який задовольняє такі умови:
1. У графі $\vec{G}$ існує єдине джерело $s$.
2. У графі $\vec{G}$ існує єдиний стік $t$.
3. Кожне ребро $(v_i, v_j) \in \vec{H}$ має невід’ємну вагу  $q_{ij} \ge 0$, яку називають **пропускною здатністю** ребра $(v_i, v_j)$.
## Примітка
Якщо в практичних задачах не виконується умова єдиного джерела або єдиного стоку  
(умови **1** та **2**), тоді:
- додають **фіктивне джерело**, яке з’єднують з усіма наявними джерелами;
- додають **фіктивний стік**, з яким з’єднують усі наявні стоки.
Пропускні здатності нових ребер вважаються **нескінченно великими**.

# Потік
## Визначення: Потік

Нехай $\vec{G} = (V, \vec{H})$ — транспортна мережа.  
**Потік** у транспортній мережі — це відображення $\tau : \vec{H} \rightarrow \mathbb{R}_0^{+},$яке кожному ребру $(v_i, v_j) \in \vec{H}$ ставить у відповідність число $\tau_{ij}$ таке, що виконуються умови:
1. Для кожного ребра $(v_i, v_j) \in \vec{H}$ виконується $\tau_{ij} \le q_{ij}.$

2. Для кожної вершини $v_j \in V$, де $v_j \neq s$ і $v_j \neq t$, виконується **закон збереження потоку** через вершину $v_j$, тобто
   $\sum_{i : (v_i, v_j) \in \vec{H}} \tau_{ij} = \sum_{k : (v_j, v_k) \in \vec{H}} \tau_{jk}.  \tag{6}$
## Примітка
У кожній транспортній мережі існує так званий **нульовий потік**, тобто
$\tau_{ij} = 0 \quad \text{для всіх } (v_i, v_j) \in \vec{H}.$

# Розріз
Нехай $\vec{G} = (V, \vec{H})$ — транспортна мережа з джерелом $s$ та стоком $t$. **Розріз** $\langle X, \overline{X} \rangle$ у мережі $\vec{G}$ — це розбиття множини вершин $V$ на множину $X$, що містить джерело $s$, та її комплемент $\overline{X} = V \setminus X,$ який містить стік $t$.
# Ємність розрізу
Нехай $\vec{G} = (V, \vec{H})$ — транспортна мережа з джерелом $s$ та стоком $t$.
**Ємність розрізу** $\langle X, \overline{X} \rangle$ у мережі $\vec{G}$ — це число
$$
q(\langle X, \overline{X} \rangle)
=
\sum_{\substack{(v_i, v_j) \in \vec{H} \\ v_i \in X,\; v_j \in \overline{X}}}
q_{ij}.
\tag{10}
$$



## Примітка
Розріз у мережі — це довільний поділ множини вершин $V$ на множини $X$ та $\overline{X}$ такий, що:
- $s \in X$,
- $t \in \overline{X}$,
- $X \cup \overline{X} = V$,
- $X \cap \overline{X} = \varnothing$.

Ємність розрізу дорівнює сумі ємностей усіх ребер, які починаються в $X$ і закінчуються в $\overline{X}$.
Ребра, що ведуть з $\overline{X}$ до $X$, при обчисленні ємності розрізу не враховуються.


# Теореми
- Нехай $\tau$ — потік у транспортній мережі   $\vec{G} = (V, \vec{H})$ з джерелом $s = v_0$ та стоком $t = v_n$.
     Нехай $P$ — $s$–$t$ напівшлях у мережі $\vec{G}$, який задовольняє такі умови:
     1. Для кожного **узгоджено орієнтованого** ребра $(v_i, v_j)$ напівшляху $P$ виконується $\tau_{ij} < q_{ij}.$ 
     2. Для кожного **протилежно орієнтованого** ребра $(v_i, v_j)$ напівшляху $P$ виконується $\tau_{ij} > 0.$ 
    Нехай $Q$ — множина всіх чисел:
    - $q_{ij} - \tau_{ij}$ для узгоджено орієнтованих ребер напівшляху $P$;
    - $\tau_{ij}$ для протилежно орієнтованих ребер напівшляху $P$.
    Нехай $\delta = \min Q,$ а $\tau^{*}$ — потік у мережі $\vec{G}$, визначений співвідношенням:
$$
\tau^{*}_{ij} =
\begin{cases}
\tau_{ij}, & \text{якщо } (v_i, v_j) \notin P, \\
\tau_{ij} + \delta, & \text{якщо } (v_i, v_j) \text{ узгоджено орієнтоване з } P, \\
\tau_{ij} - \delta, & \text{якщо } (v_i, v_j) \text{ протилежно орієнтоване до } P.
\end{cases}
$$

    Тоді величина потоку $T(\tau^{*})$ на $\delta$ більша за величину початкового потоку $T(\tau)$, тобто $T(\tau^{*}) = T(\tau) + \delta.$
- Нехай $\tau$ — потік у транспортній мережі $\vec{G} = (V, \vec{H})$ з джерелом $s$ та стоком $t$.
     Нехай $\langle X, \overline{X} \rangle$ — $s$–$t$ розріз у мережі $\vec{G}$. Тоді ємність розрізу $\langle X, \overline{X} \rangle$ є більшою або рівною за величину потоку $\tau$, тобто
$q(\langle X, \overline{X} \rangle)\;\ge\;T(\tau),$
де
$$
q(\langle X, \overline{X} \rangle)
=
\sum_{\substack{(v_i, v_j) \in \vec{H} \\ v_i \in X,\; v_j \in \overline{X}}}
q_{ij}.
$$


- Теорема (про максимальний потік і мінімальний розріз): Нехай $\tau$ — потік у транспортній мережі  $\vec{G} = (V, \vec{H})$ з джерелом $s$ та стоком $t$.
     Нехай $\langle X, \overline{X} \rangle$ — $s$–$t$ розріз у мережі $\vec{G}$. Якщо величина потоку дорівнює ємності розрізу, $T(\tau) = q(\langle X, \overline{X} \rangle),$ то потік $\tau$ є **максимальним**, а розріз $\langle X, \overline{X} \rangle$ є **мінімальним**.Крім того, $q(\langle X, \overline{X} \rangle) = T(\tau).\tag{12}$ Це має місце тоді й лише тоді, коли виконуються умови:

1.  $\tau_{ij} = q_{ij}\quad \text{для всіх } (v_i, v_j) \in \vec{H}, \; v_i \in X,\; v_j \in \overline{X},$

2. $\tau_{ij} = 0\quad \text{для всіх } (v_i, v_j) \in \vec{H}, \; v_i \in \overline{X},\; v_j \in X.$

