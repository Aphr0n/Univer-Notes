# «Глибокі» потокові функціональні одиниці
10-20 етапів
Кількість етапів обмежена через:
- Збільшення ймовірності виникнення небезпеки зі збільшенням кількості поточних етапів
- Споживання енергії
- Ціну
# Спекулятивне розгалуження
Ідеальний потоковий процесор: CPI = 1
Погане прогнозування збільшує CPI
Статичне прогнозування розгалужень:
-  Перевірка напрямку переходу (вперед або назад)
-  Якщо назад, прогнозування переходу
-  В іншому випадку ні
Динамічне прогнозування розгалужень:
-  На основі історії (кілька сотень) переходів
Буфер цілі розгалужень:
-  Адреса цілі переходу
-  Чи був перехід
## Приклад
```
add $s1, $0, $0 # sum = 0
add $s0, $0, $0 # i = 0
addi $t0, $0, 10 # $t0 = 10
for:
beq $s0, $t0, done # if i == 10, branch
add $s1, $s1, $s0 # sum = sum + i
addi $s0, $s0, 1 # increment i
j for
done:
```
# Суперскалярні процесори(і забруднення)
```
Téma 7 <94>
lw $t0, 40($s0)
add $t1, $t0, $s1
sub $t0, $s2, $s3 #Ideálny IPC: 2
and $t2, $s4, $t0 #Aktuálny IPC: 6/5 = 1.17
or $t3, $s5, $s6
sw $s7, 80($t3)
```
![[Pasted image 20260112051201.png]]
# Виконання поза черги
Аналіз кількох інструкцій
Підготуйте якомога більше інструкцій для обробки
Обробляйте інструкції не в порядку (якщо можливо)
Залежності:
- RAW (читання після запису): залежність від даних
- WAR (запис після читання): антизалежність від даних
- WAW (запис після запису): залежність від виводу
# Перейменування регістрів
```
lw $t0, 40($s0)
add $t1, $t0, $s1
sub $t0, $s2, $s3 #Ideálny IPC: 2
and $t2, $s4, $t0 #Aktuálny IPC: 6/3 = 2
or $t3, $s5, $s6
sw $s7, 80($t3)
```
![[Pasted image 20260112051824.png]]

# SIMD
Одна інструкція для обробки кількох даних (SIMD)
- Один потік інструкцій обробляє кілька потоків даних
- Один блок керування та кілька блоків виконання
- Область застосування: графіка
Наприклад, додайте чотири скалярні числа розміром 8b
![[Pasted image 20260112051915.png]]

# Багатопотокові процесори
Одночасно активуються кілька потоків:
- Якщо один призупинено/завершено, інший завантажується негайно
- Якщо один потік не «займає» всі апаратні ресурси, інший потік може їх використовувати
Не збільшує ступінь паралелізму на рівні інструкцій (ILP) у межах потоку, але збільшує пропускну здатність
# Мультипроцесори
Багатопроцесорні системи з визначеною топологією зв'язку
- Тісно зв'язані мультипроцесори
	- багатоядерні
- Слабо зв'язані мультипроцесори
	 - Мультикомп'ютери
