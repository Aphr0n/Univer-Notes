- Пам'ять для тимчасових змінних
- Вона типу LIFO (останній прийшов — перший вийшов)
- Вона динамічно зростає:
- Якщо мені потрібно зберігати більше даних але лише до певного розміру
- Вона динамічно зменшується:
- Якщо мені більше не потрібні дані
- Зростає вниз (від адреси з вищим значенням до адреси з нижчим)
- Вказівник стеку: $sp вказує на вершину стеку
![[Pasted image 20260108013059.png]]
- Викликана функція може впливати на викликаючу функцію лише через повернене значення
- Однак функція diffofsums перезаписує вміст 3 регістрів: $t0, $t1, $s0
```MIPS
# $s0 = result

diffofsums:
	addi $sp, $sp, -12 # make space on stack
	# to store 3 registers
	sw $s0, 8($sp) # save $s0 on stack
	sw $t0, 4($sp) # save $t0 on stack
	sw $t1, 0($sp) # save $t1 on stack
	add $t0, $a0, $a1 # $t0 = f + g
	add $t1, $a2, $a3 # $t1 = h + i
	sub $s0, $t0, $t1 # result = (f + g) - (h + i)
	add $v0, $s0, $0 # put return value in $v0
	lw $t1, 0($sp) # restore $t1 from stack
	lw $t0, 4($sp) # restore $t0 from stack
	lw $s0, 8($sp) # restore $s0 from stack
	addi $sp, $sp, 12 # deallocate stack space
	jr $ra # return to caller
```
### Стек під час diffofsums
![[Pasted image 20260108013358.png]]
![[Pasted image 20260108013417.png]]
# Збереження $s регістрів у стек
```MIPS
# $s0 = result
diffofsums:
	addi $sp, $sp, -4 # make space on stack to
	# store one register
	sw $s0, 0($sp) # save $s0 on stack
	# no need to save $t0 or $t1
	add $t0, $a0, $a1 # $t0 = f + g
	add $t1, $a2, $a3 # $t1 = h + i
	sub $s0, $t0, $t1 # result = (f + g) - (h + i)
	add $v0, $s0, $0 # put return value in $v0
	lw $s0, 0($sp) # restore $s0 from stack
	addi $sp, $sp, 4 # deallocate stack space
	jr $ra # return to caller
```

# Рекурсія
```MIPS
0x90 factorial: addi $sp, $sp, -8 # make room
0x94 sw $a0, 4($sp) # store $a0
0x98 sw $ra, 0($sp) # store $ra
0x9C addi $t0, $0, 2
0xA0 slt $t0, $a0, $t0 # a <= 1 ?
0xA4 beq $t0, $0, else # no: go to else
0xA8 addi $v0, $0, 1 # yes: return 1
0xAC addi $sp, $sp, 8 # restore $sp
0xB0 jr $ra # return
0xB4 else: addi $a0, $a0, -1 # n = n - 1
0xB8 jal factorial # recursive call
0xBC lw $ra, 0($sp) # restore $ra
0xC0 lw $a0, 4($sp) # restore $a0
0xC4 addi $sp, $sp, 8 # restore $sp
0xC8 mul $v0, $a0, $v0 # n * factorial(n-1)
0xCC jr $ra # return
```
![[Pasted image 20260108013645.png]]
