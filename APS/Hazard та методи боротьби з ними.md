**Hazard** — ситуація, коли виконання інструкції залежить від інструкції, яка ще не завершилася.
### Типи hazard-ів:
1. **Дані (Data Hazard)**
    - Виникає через **недоступність операндів** під час виконання інструкції.
    - Приклад: інструкція потребує результат попередньої, яка ще не обчислена.
2. **Керування (Control Hazard)**
    - Виникає через **ветвлення**.
    - Проблема: невідомо, яка інструкція буде наступною (якщо є умовний перехід).
3. **Ресурсний (Structural Hazard)**
    - Виникає через **недостатню кількість апаратних ресурсів** для виконання інструкції.
    - Приклад: одночасне використання одного і того ж ALU або пам’яті.
    ![[Pasted image 20260112042937.png]]
# Методи боротьби з data hazard:

1. **Пряме поширення (Forwarding / Data Forwarding)**
	- Результат обчислень передається **безпосередньо між стадіями конвеєра**, не чекаючи запису у регістр.
	- Приклад: інструкція `SUB R4, R1, R5` бере результат попередньої `ADD R1, R2, R3` **з ALU**, а не з регістра R1.
2. **Зворотне поширення (Backward Propagation)**
	- Дані передаються **від пізнішої стадії до ранішої**, якщо потрібні для виконання інструкцій на ранніх стадіях.
	- Використовується рідше, але дозволяє **зменшити затримки конвеєра**.
3. beq
	- Результат відомий лише на 4-му етапі ланцюжка
	- Наступна інструкція зчитується перед завершенням розгалуження
4. Штраф за неправильне передбачення розгалуження
	- Виключення інструкцій з процесу обробки, якщо розгалуження відбувається
	- Передбачення розгалуження
	![[Pasted image 20260112044556.png]]
	 **Прогнозування результату jump**
	![[Pasted image 20260112044611.png]]
	
	![[Pasted image 20260112043719.png]]
# Переадресація
Передача даних на етап виконання (E(execute)) з етапів:
- M(emory)
- WB (Writeback)
Номери регістрів з цих етапів надсилаються до блоку небезпеки (Hazard Unit)
- Перевіряється, чи цільовий регістр буде фактично використано для запису (тобто, чи є він цільовим регістром)
- lw проти sw) – RegWrite з M та WB
## Зупинка
![[Pasted image 20260112044155.png]]
![[Pasted image 20260112044208.png]]
